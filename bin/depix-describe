#!/usr/bin/env ruby

require File.dirname(__FILE__) + '/../lib/depix'
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: depix-describe somefile.dpx anotherfile.dpx [options]"

  opts.on("-c", "--compact", "Compact output (only fields that change per frame)") do |v|
    options[:compact] = true
  end
end.parse!

ARGV.each do | file |
  puts "Describing DPX #{file}. Empty elements are omitted.\n\n"
  puts "===================================================\n\n"
  begin
    puts Depix.describe_file(file, options[:compact])
  rescue Depix::InvalidHeader
    puts " - Invalid header data"
  end
end